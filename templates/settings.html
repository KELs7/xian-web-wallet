<h1 class="app-box-title">Settings</h1>
<p class="app-box-description">Manage your wallet settings and accounts.</p>
<div class="app-box-form">
    <div class="alert alert-danger" role="alert" id="settingsError" style="display: none;"></div>
    <div class="alert alert-success" role="alert" id="settingsSuccess" style="display: none;"></div>
    <div class="alert alert-warning" role="alert" id="settingsWarning" style="display: none;"></div> <!-- For warnings like needing unlock -->

    <!-- RPC Management (Unchanged) -->
    <div class="form-group">
        <label for="rpc_manager">Network Configuration</label>
        <div class="input-group mb-2">
            <select class="form-control" id="rpc_select">
                <option value="https://node.xian.org,https://explorer.xian.org">Mainnet (node.xian.org)</option>
                <option value="https://testnet.xian.org,https://testnet-explorer.xian.org">Testnet (testnet.xian.org)</option>
                <!-- Custom RPCs added here by JS -->
            </select>
            <div class="input-group-append">
                <button class="btn btn-sm btn-danger" id="remove_rpc_button" title="Remove Selected Custom Network"><i class="fas fa-trash-alt"></i></button>
            </div>
        </div>
        <div class="input-group mb-2">
            <input type="text" class="form-control" id="add_rpc_input" placeholder="Enter new RPC URL (e.g., https://my-node.com)">
            <div class="input-group-append">
                <button class="btn btn-sm btn-secondary" id="add_rpc_button" title="Add Custom Network"><i class="fas fa-plus"></i></button>
            </div>
        </div>
        <div class="input-group">
            <input type="text" class="form-control" id="add_explorer_input" placeholder="Enter corresponding Explorer URL (e.g., https://my-explorer.com)">
        </div>
    </div>
    <hr> <!-- Separator -->

    <!-- View Recovery Phrase Section -->
    <div class="form-group">
        <label>Recovery Phrase (Mnemonic)</label>
        <p>This is your master key. Keep it secret and safe! Anyone with this phrase can access all your accounts.</p>
        <a href="#" id="view_recovery_phrase_link">View Recovery Phrase</a>
        <div id="recovery_phrase_confirmation" style="display: none; margin-top: 10px;">
            <input type="password" class="form-control mb-2" id="recovery_phrase_password" placeholder="Enter password to confirm">
            <button class="btn btn-sm btn-warning" id="confirm_view_recovery_phrase">Confirm</button>
            <button class="btn btn-sm btn-secondary" id="cancel_view_recovery_phrase">Cancel</button>
        </div>
        <div id="recovery_phrase_display_area" class="alert alert-warning" style="display: none; margin-top: 10px; word-wrap: break-word;">
            <strong>Your Recovery Phrase:</strong><br>
            <span id="recovery_phrase_text"></span>
            <button class="btn btn-sm btn-secondary mt-2" id="hide_recovery_phrase">Hide Phrase</button>
        </div>
    </div>
    <hr> <!-- Separator -->

     <!-- Account Management Section -->
     <div class="form-group">
        <label>Accounts</label>
        <p>Manage accounts derived from your recovery phrase.</p>
        <div id="account-list-settings" class="list-group mb-3" style="max-height: 200px; overflow-y: auto;">
            <!-- Account list populated by JS -->
            <div class="list-group-item text-center" id="accounts-loading">
                <i class="fas fa-spinner fa-spin"></i> Loading Accounts...
            </div>
        </div>
        <button class="btn btn-sm btn-primary" id="setting-create-account-btn"><i class="fas fa-plus"></i> Create New Account</button>
     </div>
     <hr> <!-- Separator -->


    <!-- Remove Wallet (Unchanged) -->
    <div class="form-group">
        <label for="remove_wallet_export">Remove Wallet</label>
        <p>Remove this wallet (including all accounts and the recovery phrase) from this browser. This action is irreversible without your recovery phrase.</p>
        <a href="#" id="remove_wallet_export" class="text-danger">Remove this Wallet</a>
    </div>
    <hr> <!-- Separator -->

    <!-- Version Info (Unchanged) -->
    <div class="form-group">
        <label for="version">Wallet Version</label>
        <p id="version">Loading...</p>
    </div>

    <!-- Back button hidden as it's in side nav now -->
    <!--
    <div class="btn-group" style="display:none">
        <button class="btn btn-secondary" id="settings-back">Back</button>
    </div>
    -->
</div>
<!-- Modal for Renaming Account -->
<div class="modal fade" id="renameAccountModal" tabindex="-1" aria-labelledby="renameAccountModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="renameAccountModalLabel">Rename Account</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="renameAccountIndex">
        <div class="mb-3">
          <label for="renameAccountName" class="form-label">New Account Name</label>
          <input type="text" class="form-control" id="renameAccountName" required>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="saveAccountNameBtn">Save Name</button>
      </div>
    </div>
  </div>
</div>
<script src="templates/page_js/settings.js"></script>